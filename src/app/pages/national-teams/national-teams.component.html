<div class="container">
  <app-header></app-header>
  <div class="w3-container w3-center w3-padding w3-light-grey">

  <div class="search-box w3-margin-top">
    <i class="fa fa-search search-icon"></i>
    <input type="text" class="w3-input search-input"
           placeholder="Search by national team" [(ngModel)]="searchTerm">
    <i *ngIf="searchTerm" class="w3-center fa fa-times clear-icon" (click)="clearSearch()"></i>
  </div>

<div class="action-container w3-margin">
  <select [(ngModel)]="selectedContinent" class="filter-btn action-btn" title="Filter by continent">
    <option value="">All Continents</option>
    <option *ngFor="let continent of continents" [value]="continent">{{ continent }}</option>
  </select>

  <button *ngIf="selectedContinent"
          class="clear-btn action-btn"
          (click)="clearContinentFilter()">
    <i class="fa fa-times w3-margin-right"></i> Clear
  </button>
</div>

<div *ngIf="filteredTeams.length === 0" class="w3-container w3-center no-results">
  <p>No teams found</p>
</div>

  <div class="responsive-grid w3-padding-16">
    <div class="w3-card-2 w3-hover-shadow card" *ngFor="let team of filteredTeams; let i = index" (click)="openModal(i)">
      <img [src]="team.club_logo" [alt]="team.club_name" class="w3-image img w3-hover-opacity-off" loading="lazy">
      <span class="zoom-icon" (click)="openImageModal(team, $event)">
        <i class="fa fa-search-plus"></i>
      </span>
      <footer class="w3-container w3-center">
        <p>{{ team.club_name }}</p>
      </footer>
    </div>
  </div>

<div *ngIf="selectedImage" class="w3-modal" style="display:block;">
  <div class="w3-modal-content w3-animate-zoom" style="max-width:500px; margin:auto; text-align:center;">

    <lib-ngx-image-zoom
      [thumbImage]="selectedImage"
      [fullImage]="selectedImage"
      [magnification]="2"
      [enableScrollZoom]="true"
      [enableLens]="true"
      [lensWidth]="120"
      [lensHeight]="120"
      [zoomMode]="'hover'"
      style="display:block; margin:auto; max-width:80%;">
    </lib-ngx-image-zoom>

    <div style="margin-top:10px;">
      <button (click)="closeImageModal()" class="w3-button w3-black title-game" style="width: 100%;">
        <i class="fa fa-times"></i>
      </button>
    </div>

  </div>
</div>

<!-- Modal Team -->
<div *ngIf="selectedTeam" id="teamModal" class="w3-modal" style="display:block;">
  <div class="w3-modal-content w3-animate-zoom" style="max-width:600px; margin:auto;">
    <header class="w3-container w3-center">
      <span (click)="closeModal()" class="w3-button w3-display-topright w3-black title-game">
        <i class="fa fa-times"></i>
      </span>
    </header>

    <div class="w3-container w3-center">
      <h2 class="modal-title">{{ selectedTeam.club_name }}</h2>
      <div class="w3-center w3-margin-top">
        <span class="fi fi-{{ getCountryCode(selectedTeam.club_name) }}" style="font-size: 4rem; aspect-ratio: 4/3;"></span>
      </div>
      <p><strong>Continent:</strong> {{ selectedTeam.continent }}</p>
      <p><strong>More Info:</strong></p>
      <div class="w3-center w3-margin-bottom">
        <a [href]="selectedTeam.wiki_url" target="_blank" class="w3-btn w3-black w3-medium w3-border w3-margin-right" title="View Wikipedia">
          <i class="fa-brands fa-wikipedia-w fa-lg icon"></i>
        </a>
        <a [href]="getGoogleNewsUrl(selectedTeam)" target="_blank" class="w3-btn w3-black w3-medium w3-border" title="Search on Google">
          <i class="fa-brands fa-google fa-lg icon"></i>
        </a>
        <a [href]="getYouTubeUrl(selectedTeam)" target="_blank" class="w3-btn w3-black w3-medium w3-border w3-margin-left" title="Search on YouTube">
          <i class="fa-brands fa-youtube fa-lg icon"></i>
        </a>
      </div>
    </div>

    <div class="w3-center w3-margin-top">
      <p>Share this team (via X):</p>
      <a [href]="getTwitterShareUrl(selectedTeam)" target="_blank" class="w3-btn w3-black" title="Share on X">
        <i class="fa-brands fa-x-twitter fa-lg icon"></i>
      </a>
    </div>

    <footer class="w3-container w3-padding">
      <button (click)="closeModal()" class="w3-btn w3-black w3-margin-bottom title-game w3-left">Close</button>
    </footer>
  </div>
</div>

  </div>

  <button
    class="back-to-top"
    [ngClass]="{'fade-out': isFadingOut}"
    *ngIf="showBackToTop || isFadingOut"
    (click)="scrollToTop()"
    title="Back to Top">
    <i class="fa fa-arrow-up"></i>
  </button>

  <app-footer></app-footer>
</div>
